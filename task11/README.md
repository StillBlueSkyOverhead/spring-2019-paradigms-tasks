# Содержание
1. [Содержание](#содержание)
1. [Общее](#общее)
1. [Задание](#задание)
    1. [Предоставленный код](#предоставленный-код)
    1. [Подробнее](#подробнее)
    1. [Тесты](#тесты)
1. [Советы](#советы)
1. [Требования к корректности решения](#требования-к-корректности-решения)
1. [Формат сдачи](#формат-сдачи)
1. [Сроки сдачи](#сроки-сдачи)

# Общее

В этом домашнем задании вам предлагается реализовать свой класс типов `Map`
для ассоциативных массивов на языке программирования Haskell, а также
реализовать для него обобщённые тесты и в реализовать в качестве примера
двоичное дерево поиска (необязательно самобалансирующееся).

Это задание оценивается в 5 баллов, из которых 50% вы получаете за корректность и 50% за стиль.

# Задание

В этой папке лежит Cabal-проект (подробнее в задании task10), представляющий собой набросок библиотеки,
в которой вам необходимо реализовать недостающие функции и дописать тесты.
Для них уже написаны типовые аннотации и объявления, но вместо реализации написано `undefined`.
Вам необходимо заменить все `undefined` на реализации, соответствующие требованиям, указанным в комментариях.

## Предоставленный код

Перед началом кодирования рекомедуется внимательно прочитать задание и
комментарии во всех файлах.

При помощи команды `cabal new-haddock` (или `cabal v1-haddock`) вы можете сгенерировать документацию
с описанием предоставленного кода, она появится в файле с именем вроде
`dist-newstyle/build/*/*/*/doc/html/task11/index.html`.

В файле `src/Main.hs` находится заготовка для класса типов `Map`,
которую вам необходимо дополнить реализациями по умолчанию.
Поведение функций соответствует поведению функций из модуля `Data.Map.Strict`
из пакета `containers` (см. Hoogle или ссылки в сгенерированной документации).

В файле `src/MapInstance.hs` находится реализация функций класса
типов `Map` для стандартного самобалансирующегося дерева поиска из модуля `Data.Map.Strict`.
Этот файл менять не требуется.

В файле `src/NaiveList.hs` находится реализация функций класса
типов `Map` через отсортированный список.
Этот файл менять не требуется.

В файле `src/NaiveTree.hs` находится заготовка реализации функций класса
типов `Map` для двоичного дерева поиска, которые вам необходимо закончить.

## Подробнее
Класс типов `Map` описывает конечные обобщённые контейнеры, которые
содержат неупорядоченный список пар "ключ-значение", причём все ключи различны.
Например, в Python таким контейнером является `{}`, а в C++ – `std::map<>`.

Любые контейнеры, написанные в функциональном стиле, имеют огромное
количество готовых функций на все случаи жизни (например, не просто
`insert`, а ещё и `insertWith`, `insertWithKey` и `adjust`).
Разумеется, реализовывать их все с нуля – дело гиблое, поэтому `Map` сводит
практически все функции к шести базовым, из которых только две как-то
содержательно смотрят на контейнер – `lookup` (поиск значения по ключу)
и `alter` (совмещённый поиск значения и удаление/добавление/обновление).

Для выполнения задания вам предлагается воспользоваться разработкой через тестирование
(test-driven development, TDD):

1. Закомментировать вызовы `mapTests "NaiveList"` и `testNaiveTree`.
1. Закомментировать все падающие тесты для `Map`.
1. Для каждой функции из `src/Map.hs` (начните с шести базовых функций):
    1. Прочитать документацию в модуле `Data.Map.Strict`.
    2. Добавить соответствующие тсты в `test/TestMap.hs`.
    3. Убедиться, что свежедобавленный тест не работает.
    4. Добавить соответствующую реализацию по умолчанию в `src/Map.hs`.
    5. Убедиться, что свежедобавленный тест стал работать.
    6. Повторить для следующей функции.
1. Прочитать пример нетривиальной реализации `Map` в `src/NaiveList.hs`.
1. Реализовать какое-нибудь двоичное дерево поиска в `src/NaiveTree.hs`.
1. Раскомментировать вызовы `mapTests "NaiveList"` и `testNaiveTree`.
1. Убедиться, что все тесты проходят.

При реализации дерева требуется, чтобы каждая функция, работающая
за *O(h)*, спускалась вниз по дереву (и поднималась наверх) не больше одного раза.
Например, если вы один раз вызвали `lookup`, то больше ничего
с деревом сделать не можете.

## Тесты

В предоставленной реализации уже имеется несколько автоматических тестов, которые лежат в каталоге `test`
и запускаются командой `cabal new-test` (или `cabal v1-test`).

Вам требуется для каждой функции из `Map` реализовать хотя бы один тест,
проверяющий её работу для всех экземпляров `Map`.
При этом в каждом тесте следует использовать минимально возможное
количество функций из `Map`, чтобы тестировать не всё вместе,
а по отдельности, если есть такая возможность.

Если есть несколько тестов, проверяющих одну и ту же функцию,
оберните их в одну `testGroup`.
Располагайте тесты в том же порядке, в котором функции объявлены в `Map`,
если есть такая возможность.

# Советы

1. GHC версии 8.6.3 и ниже не пересобирает тесты, если вы меняете реализацию по умолчанию
   (т.е. `src/Map.hs`), поэтому при изменениях этого файла сначала делайте
   `cabal new-clean`(или `cabal clean`). Альтернатива: обновиться хотя бы до GHC 8.6.4
   (либо скачав и переустановив Haskell Platform,
   либо командой `ghcup install 8.6.5 && ghcup set 8.6.5`). 
1. Используйте команду `hlint`, чтобы получить советы по упрощению кода.
   Например: `hlint src/Map.hs` или `hlint .` (чтобы проверить всю папку).
   Не всем из них, впрочем, надо следовать.
1. В этом задании отсутствует автоматическая проверка форматирования кода и проверки на Travis.
   Разверните себе среду разработки локально, делайте много тестов и запускайте их через `cabal` перед отправкой.
1. Пишите тесты, а не пытайтесь интерактивно вызывать функции.

# Требования к корректности решения

Если присланные файлы не соответствуют хотя бы одному из условий ниже, решение считается некорректным и оценивается в 0 баллов:

* Коммиты не трогают `.cabal` - файл. Если нужно в нем что-то изменить — пишите, обсудим.
* `cabal new-build` должен собирать объектные файлы библиотеки без ошибок и предупреждений
* `cabal new-test` отрабатывает без ошибок и все автоматические тесты проходят
* Типы функций в заданиях не изменены
* Решения не должны зависать при запуске на любых корректных тестах
* Файлы `src/MapInstance.hs` и `src/NaiveList.hs` оставлены без изменений
* Тесты одинаково проверяют корректность всех трёх экземпляров `Map`
* Тесты по возможности идут в том же порядке, что и объявления функций в `Map`

# Формат сдачи
Если возникают **любые** непонятки с форматом сдачи (даже простые и мелкие) - пишите преподавателю!
Мы не хотим, чтобы вы не сдали просто потому что кто-то не очень хорошо рассказал Git или дал мало практики :)

Требования стандартные (см. task08), название для pull request: `Task11, GroupXX, Фамилия Имя`.

# Сроки сдачи
|   | `18.Б09-пу` | `18.Б10-пу` |Максимальное количество баллов при сдаче в срок
|---|---|---|---|
|Дата выдачи|11.05.2019|11.05.2019||
|Мягкий дедлайн|18.05.2019 22:59|18.05.2019 22:59|5|
|Жёсткий дедлайн|зачёт|зачёт|2.5|

Зачёт закончится не раньше 22.05.2019 15:30 (формальное время начала зачёта),
однако может закончиться раньше 22:59, потому что может быть надо физически
заполнить и отнести ведомости.
